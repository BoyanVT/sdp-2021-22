# Стек и опашка - приложения. Видове опашки

## Обработка на изрази (Shunting-yard algorithm)

Даден е математически израз, който съдържа стандартни аритметични операции (+, -, *, /) числа и скоби. Нека за улеснение числата да са едноцифрени, а делението - целочислено. Да приемем, че изразът е коректно зададен.
- Да се преобразува в обратен полски запис.
- Да се пресметне стойността му.

Пример: 
`(2^3+4*(7-2))*2^2^3`

Обратен полски запис: `23^472-*+223^^*`

Стойност: `7168`

##### Операциите, подредени по приоритет, и тяхната асоциативност

| Операция | Асоциативност |
| -------- | ------------- |
|    ^     |     дясна     |
|   *, /   |     лява      |
|   +, -   |     лява      |

### Shunting-yard algorithm -  за преобразуване в обратен полски запис

1. обхождаме знак по знак израза
2. ако сегашният знак е:
    - число - добавяме го в края на изходния израз
    - `(` - добавяме го в стека с операциите
    - `)` - премахваме всички операции в стека и ги добавяме в края на изходния израз, докато не стигнем `(`. **Нe добавяме `(` в изходния израз, не добавяме `)` в стека**
    - знак за операция - премахваме всички операции в стека и ги слагаме в края на изходния израз, докато не стигнем:
        - `(` - не я махаме от стека
        - операция с по-нисък приоритет, ако сегашната е ляво-асоциативна
        - операция с равен или по-нисък приоритет, ако сегашната е дясно-асоциативна
3. след като обходим израза, премахваме всички останали операции в стека и ги слагаме в края на изходния израз

### Пресмятане на израз в обратен полски запис

1. обхождаме знак по знак израза
2. ако сегашния знак е:
    - число - добавяме го в стека със стойностите
    - операция - взимаме предпоследната и последната стойност от стека и прилагаме операцията върху тях, стойността добавяме в стека
3. резултатът е единствения елемент, останал в стека след обхождането

## Видове опашки

- Circular queue - специфичното за нея е, че първият елемент е "предхождан" от последния. Как се реализира това ще разберем по-нататък. 
<img src="https://cdn.programiz.com/sites/tutorial2program/files/circular-queue.png " alt="queue" width="400"/>
- Double-ended queue - наричана още dequeue. При нея се изменя интерфейса, който ни е познат досега - можем да добавяме и махаме елементи както в началото, така и в края на опашката.
<img src="https://cdn.programiz.com/sites/tutorial2program/files/double-ended-queue.png" alt="queue" width="400"/>
- Priorirty queue - държи елементите си сортирани спрямо някакъв критерий за сравнимост на елементите, като най-отпред стои "най-големия" елемент, а най-отзад - "най-малкия". Най-ефективната реализация на тази опашка е чрез дървовидната структура от данни heap(пирамида), която ще разгледаме по-напред в курса.
<img src="https://cdn.programiz.com/sites/tutorial2program/files/circular-queue.png" alt="queue" width="400"/>


## За упражнение
Дадена е редица от скоби - кръгли `()`, квадратни `[]` и къдрави `{}`. Балансирана редица от скоби е:
- празният низ
- `отваряща_скоба балансирана_редица_от_скоби затваряща_скоба`, където `отваряща_скоба` и `затваряща_скоба` са от един вид
Да се провери дали дадена редица от скоби е балансирана. 